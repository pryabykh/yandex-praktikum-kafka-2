# praktikum-kafka
–ü—Ä–∏ –ª–æ–∫–∞–ª—å–Ω–æ–º –∑–∞–ø—É—Å–∫–µ –ê–ü–ò –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ —Å—Å—ã–ª–∫–µ http://localhost:8080/swagger-ui/index.html

## –û–ø–∏—Å–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
–°–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ—Ç–æ–∫–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Ü–µ–Ω–∑—É—Ä—ã —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ Kafka Streams.

## –ë–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
### MessagesStream
–ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–µ–∞–ª–∏–∑—É–µ—Ç –ø–æ—Ç–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—Ö–æ–¥—è—â–µ–≥–æ —Ç–æ–ø–∏–∫–∞, –ø—Ä–∏–º–µ–Ω—è–µ—Ç —Ñ–∏–ª—å—Ç—Ä –ø–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –∏ —Ü–µ–Ω—É–∑—É—Ä—É –∏ –¥–∞–ª–µ–µ –ø–µ—Ä–µ–¥–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –≤—ã—Ö–æ–¥–Ω–æ–π —Ç–æ–ø–∏–∫.

### MessageProducer
–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –ø–µ—Ä–µ–¥–∞—á—É —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Ç–æ–ø–∏–∫ —Å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ (–¥–∞–Ω–Ω—ã–π —Ç–æ–ø–∏–∫ —è–≤–ª—è–µ—Ç—Å—è —Ç–æ—á–∫–æ–π –≤—Ö–æ–¥–∞ –≤ —Å—Ç—Ä–∏–º)

### BlockedUsersProducer
–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –ø–µ—Ä–µ–¥–∞—á—É –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —Ç–æ–ø–∏–∫.

### CensorComponent
–û—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Ü–µ–Ω–∑—É—Ä—É. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å —Å—Ç—Ä–æ–∫–∏ –¥–ª—è —Ü–µ–Ω–∑—É—Ä—ã, –∞ —Ç–∞–∫–∂–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –º–∞—Å–∫–∏—Ä—É—è –≤ –Ω–∏—Ö –∑–∞–ø—Ä–µ—â–µ–Ω–Ω—ã–µ —Å–ª–æ–≤–∞. 

### KafkaMessagesTopicConfiguration, KafkaBlockListTopicConfiguration
–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç Kafka-—Ç–æ–ø–∏–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –û–Ω —á–∏—Ç–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –ø—ã—Ç–∞–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å —Ç–æ–ø–∏–∫ —Å –∑–∞–¥–∞–Ω–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Ä–∞–∑–¥–µ–ª–æ–≤ –∏ —Ä–µ–ø–ª–∏–∫, –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–∏—Ç—É–∞—Ü–∏—é, –∫–æ–≥–¥–∞ —Ç–æ–ø–∏–∫ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –ª–æ–≥–∏—Ä—É—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± —É—Å–ø–µ—Ö–µ –∏–ª–∏ –æ—à–∏–±–∫–µ.

## Java
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ –≤–µ—Ä—Å–∏–∏ Java 21

## Kafka
–î–ª—è —Ä–∞–±–æ—Ç—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º –±—Ä–æ–∫–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π **Kafka**

## Maven
–ü—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è Maven –≤–µ—Ä—Å–∏–∏ 3.9.9

## –°–±–æ—Ä–∫–∞
–î–ª—è —Å–±–æ—Ä–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–º–∞–Ω–¥—É
```
mvn clean package
```
## –ó–∞–ø—É—Å–∫ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ Docker
–î–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏–∑ –¥–∏—Ä—Ä–µ–∫—Ç–æ—Ä–∏–∏ /docker –ø—Ä–æ–µ–∫—Ç–∞ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–ª–µ–¥—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É:

```
docker-compose -p kafka-app -f .\app.yaml up -d --build
```
## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ (–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é)

1. –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–µ—Ä–µ–π—Ç–∏ –≤ –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ app-replica-1
2. –î–∞–ª–µ–µ –æ—Ç–∫—Ä—ã–≤–∞–µ–º –≤ –±—Ä–∞—É–∑–µ—Ä–µ Swagger –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ API http://localhost:8080/swagger-ui/index.html
3. –î–ª—è –æ—Ç–ø—Ä–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –≤–æ—Å–ø–æ–ª—å–∑—É–µ–º—Å—è –º–µ—Ç–æ–¥–æ–º /send-message. –£–∫–∞–∂–µ–º:
```
from: USER_1
to: USER_2
content: test 123
```
–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ–∂–∏–¥–∞–µ–º –≤ –ª–æ–≥–∞—Ö —É–≤–∏–¥–µ—Ç—å —Å–ª–µ–¥—É—é—â–µ–µ:
```
‚ûï–°–æ–æ–±—â–µ–Ω–∏–µ {from=USER_1, to=USER_2, content='test 123'} –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –æ—á–µ—Ä–µ–¥—å
üí§–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è : {"from":"USER_1","to":"USER_2","content":"test 123","blockedUsers":[]}
ü•≥–°–æ–æ–±—â–µ–Ω–∏–µ {"from":"USER_1","to":"USER_2","content":"test 123","blockedUsers":[]} –ø–µ—Ä–µ–¥–∞–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é!!!
```
4. –î–ª—è —Ü–µ–Ω–∑—É—Ä—ã —Å–æ–æ–±—â–µ–Ω–∏—è –≤–æ—Å–ø–æ–ª—å–∑—É–µ–º—Å—è –º–µ—Ç–æ–¥–æ–º /censor-add. –£–∫–∞–∂–µ–º:
```
string: 123
```
–í–∏–¥–∏–º –≤ –ª–æ–≥–∞—Ö:
```
–°—Ç—Ä–æ–∫–∞ 123 –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ —Å–ø–∏—Å–æ–∫ —Ü–µ–Ω–∑—É—Ä—ã
```
5. –ó–∞–Ω–æ–≤–æ –æ—Ç–ø—Ä–∞–≤–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–º –º–µ—Ç–æ–¥–æ–º /send-message. –£–∫–∞–∂–µ–º:
```
from: USER_1
to: USER_2
content: test 123
```
–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ–∂–∏–¥–∞–µ–º –≤ –ª–æ–≥–∞—Ö —É–≤–∏–¥–µ—Ç—å —Å–ª–µ–¥—É—é—â–µ–µ:
```
‚ûï–°–æ–æ–±—â–µ–Ω–∏–µ {from=USER_1, to=USER_2, content='test 123'} –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –æ—á–µ—Ä–µ–¥—å
üí§–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è : {"from":"USER_1","to":"USER_2","content":"test 123","blockedUsers":[]}
ü•≥–°–æ–æ–±—â–µ–Ω–∏–µ {"from":"USER_1","to":"USER_2","content":"test ***","blockedUsers":[]} –ø–µ—Ä–µ–¥–∞–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é!!!
```
–û–±—Ä–∞—â–∞–µ–º –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ —Å—Ç—Ä–æ–∫–∞ 123 –∑–∞–º–∞—Å–∫–∏—Ä–æ–≤–∞–ª–∞—Å—å –≤ ***

6. –î–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤–æ—Å–ø–æ–ª—å–∑—É–µ–º—Å—è –º–µ—Ç–æ–¥–æ–º /block-user. –£–∞–∂–µ–º:
```
blocker: USER_2
blocked: USER_1
```

7. –ó–∞–Ω–æ–≤–æ –æ—Ç–ø—Ä–∞–≤–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–º –º–µ—Ç–æ–¥–æ–º /send-message. –£–∫–∞–∂–µ–º:
```
from: USER_1
to: USER_2
content: test 123
```
–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ–∂–∏–¥–∞–µ–º –≤ –ª–æ–≥–∞—Ö —É–≤–∏–¥–µ—Ç—å —Å–ª–µ–¥—É—é—â–µ–µ:
```
‚ûï–°–æ–æ–±—â–µ–Ω–∏–µ {from=USER_1, to=USER_2, content='test 123'} –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –æ—á–µ—Ä–µ–¥—å
üí§–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è : {"from":"USER_1","to":"USER_2","content":"test 123","blockedUsers":[]}
üö´–°–æ–æ–±—â–µ–Ω–∏–µ {"from":"USER_1","to":"USER_2","content":"test 123","blockedUsers":["USER_1"]} –Ω–µ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ, —Ç–∞–∫ –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω!!!
```

